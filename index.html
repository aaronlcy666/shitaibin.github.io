<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lessisbetter.site","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
<meta property="og:type" content="website">
<meta property="og:title" content="Goè¯­è¨€å……ç”µç«™">
<meta property="og:url" content="http://lessisbetter.site/index.html">
<meta property="og:site_name" content="Goè¯­è¨€å……ç”µç«™">
<meta property="og:description" content="åŒºå—é“¾ã€Goè¯­è¨€">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="å¤§å½¬">
<meta property="article:tag" content="åŒºå—é“¾ Goè¯­è¨€ åç«¯ æŠ€æœ¯ äººç”Ÿ ç¼–ç¨‹">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://lessisbetter.site/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>Goè¯­è¨€å……ç”µç«™ - å¤§å½¬ less is better</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Goè¯­è¨€å……ç”µç«™" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Goè¯­è¨€å……ç”µç«™</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">å¤§å½¬ less is better</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-ä¸»é¡µ">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>ä¸»é¡µ</a>

  </li>
        <li class="menu-item menu-item-æ ‡ç­¾äº‘">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾äº‘</a>

  </li>
        <li class="menu-item menu-item-ä¸“é¢˜æ–‡ç« ">

    <a href="/subject/" rel="section"><i class="fa fa-fw fa-th"></i>ä¸“é¢˜æ–‡ç« </a>

  </li>
        <li class="menu-item menu-item-æ–‡ç« åˆ—è¡¨">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>æ–‡ç« åˆ—è¡¨</a>

  </li>
        <li class="menu-item menu-item-å…³äº">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-å¤§ç‰›åšå®¢">

    <a href="/blogs/" rel="section"><i class="fa fa-fw fa-sitemap"></i>å¤§ç‰›åšå®¢</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

  
</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/08/30/cgroup-2-memory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/30/cgroup-2-memory/" class="post-title-link" itemprop="url">Dockerå®¹å™¨åŸºç¡€ï¼šCgroup - memoryå­ç³»ç»Ÿ</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-30 10:45:08 / ä¿®æ”¹æ—¶é—´ï¼š11:12:31" itemprop="dateCreated datePublished" datetime="2020-08-30T10:45:08+08:00">2020-08-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/08/27/cgroup-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/27/cgroup-1/" class="post-title-link" itemprop="url">Dockerå®¹å™¨åŸºç¡€ï¼šCgroup - èµ„æºæ§åˆ¶ç®€ä»‹</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-27 21:43:52" itemprop="dateCreated datePublished" datetime="2020-08-27T21:43:52+08:00">2020-08-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-08-30 10:44:39" itemprop="dateModified" datetime="2020-08-30T10:44:39+08:00">2020-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ä»€ä¹ˆæ˜¯Cgroup"><a href="#ä»€ä¹ˆæ˜¯Cgroup" class="headerlink" title="ä»€ä¹ˆæ˜¯Cgroup"></a>ä»€ä¹ˆæ˜¯Cgroup</h2><p>Cgroup æ˜¯ Control Group çš„ç¼©å†™ï¼Œæä¾›å¯¹ä¸€ç»„è¿›ç¨‹ï¼ŒåŠæœªæ¥å­è¿›ç¨‹çš„èµ„æº<strong>é™åˆ¶ã€æ§åˆ¶ã€ç»Ÿè®¡</strong>èƒ½åŠ›ï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€‚</p>
<ul>
<li>é™åˆ¶ï¼šé™åˆ¶çš„èµ„æºæœ€å¤§ä½¿ç”¨é‡é˜ˆå€¼ã€‚æ¯”å¦‚ä¸èƒ½è¶…è¿‡128MBå†…å­˜ï¼ŒCPUä½¿ç”¨ç‡ä¸å¾—è¶…è¿‡50%ï¼Œæˆ–è€…åªèƒ½æ˜¯å¦CPUçš„æŸå“ªå‡ ä¸ªæ ¸ã€‚</li>
<li>æ§åˆ¶ï¼šè¶…è¿‡èµ„æºä½¿ç”¨æœ€å¤§é˜ˆå€¼æ—¶ï¼Œè¿›ç¨‹ä¼šè¢«æ§åˆ¶ï¼Œä¸ä»»ç”±å®ƒå‘å±•ã€‚æ¯”å¦‚cgroupå†…æ‰€æœ‰tasksçš„å†…å­˜ä½¿ç”¨é‡è¶…è¿‡é˜ˆå€¼çš„ç»“æœå°±æ˜¯è¢«KILLï¼ŒCPUä½¿ç”¨ç‡ä¸å¾—è¶…è¿‡è®¾å®šå€¼ã€‚</li>
<li>ç»Ÿè®¡ï¼šç»Ÿè®¡èµ„æºçš„ä½¿ç”¨æƒ…å†µç­‰æŒ‡æ ‡ã€‚æ¯”å¦‚cgroupå†…tasksçš„å†…å­˜ä½¿ç”¨é‡ï¼Œå ç”¨CPUçš„æ—¶é—´ã€‚</li>
</ul>
<p>Cgroup åŒ…å«3ä¸ªç»„ä»¶ï¼š</p>
<ul>
<li>cgroup ï¼šä¸€ç»„è¿›ç¨‹ï¼Œå¯ä»¥åŠ ä¸Šsubsystem</li>
<li>subsystem ï¼šä¸€ç»„èµ„æºæ§åˆ¶æ¨¡å—ï¼ŒCPUã€å†…å­˜â€¦</li>
<li>hierarchy ï¼š æŠŠä¸€ç»„cgroupä¸²æˆæ ‘çŠ¶ç»“æ„ï¼Œè¿™æ ·å°±èƒ½å®ç°cgroupçš„ç»§æ‰¿ã€‚ä¸ºä»€ä¹ˆè¦ç»§æ‰¿å‘¢ï¼Ÿå°±å¦‚åŒdockeré•œåƒçš„ç»§æ‰¿ï¼Œç«™åœ¨å‰äººçš„åŸºç¡€ä¹‹ä¸Šï¼Œå…å»é‡å¤çš„é…ç½®</li>
</ul>
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦Cgroup"><a href="#ä¸ºä»€ä¹ˆéœ€è¦Cgroup" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦Cgroup"></a>ä¸ºä»€ä¹ˆéœ€è¦Cgroup</h2><p>ä¸ºä»€ä¹ˆéœ€è¦Cgroupçš„é—®é¢˜ç­‰ä»·äºï¼šä¸ºä»€ä¹ˆéœ€è¦é™åˆ¶ä¸€ç»„è¿›ç¨‹çš„èµ„æºï¼Ÿ</p>
<p>æœ‰å¤šç§åŸå› ï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>Linuxæ˜¯ä¸€ä¸ªå¯ä»¥å¤šç”¨æˆ·ç™»å½•çš„ç³»ç»Ÿï¼Œå¦‚ä½•é™åˆ¶ä¸åŒçš„ç”¨æˆ·ä½¿ç”¨ä¸åŒé‡çš„ç³»ç»Ÿèµ„æºå‘¢ï¼Ÿ</li>
<li>æŸä¸ªç³»ç»Ÿæœ‰64æ ¸ï¼Œç”±äºå±€éƒ¨æ€§åŸç†ï¼Œå¦‚æœä¸€ç»„è¿›ç¨‹åœ¨64ä¸ªæ ¸ä¸Šè°ƒåº¦ï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œä½†æŠŠè¿™äº›è¿›ç¨‹åªå…è®¸åœ¨æŸå‡ ä¸ªæ ¸ä¸Šè°ƒåº¦ï¼Œå°±æœ‰è¾ƒå¥½çš„å±€éƒ¨æ€§ï¼Œæé«˜æ•ˆç‡ã€‚è¿™ç±»ä¼¼ä¸åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒæŸä¸ªæœ‰çŠ¶æ€çš„è¯·æ±‚ï¼Œæœ€å¥½èƒ½åˆ†é…åˆ°ä¸Šä¸€æ¬¡å¤„ç†è¯¥è¯·æ±‚çš„æœºå™¨ä¸Šä¸€æ ·çš„é“ç†ã€‚</li>
</ol>
<p>cgroupçš„æ–‡æ¡£ä¸­è¿˜æåˆ°ä¸€ä¸ªæ€è·¯ï¼šå®ç°èµ„æºé™åˆ¶çš„æŠ€æœ¯æœ‰å¤šç§ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨cgroupï¼Ÿ</p>
<p>cgroupæ˜¯å†…æ ¸å®ç°çš„ï¼Œå®ƒæ›´è½»é‡ã€æ›´é«˜æ•ˆã€å¯¹å†…æ ¸çš„çƒ­ç‚¹è·¯å¾„å½±å“æœ€å°ã€‚</p>
<h2 id="ä½ çš„Linuxæ”¯æŒå“ªäº›Cgroup-subsystem"><a href="#ä½ çš„Linuxæ”¯æŒå“ªäº›Cgroup-subsystem" class="headerlink" title="ä½ çš„Linuxæ”¯æŒå“ªäº›Cgroup subsystem"></a>ä½ çš„Linuxæ”¯æŒå“ªäº›Cgroup subsystem</h2><p>æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒçš„subsystemï¼Œå…±12ä¸ªå­ç³»ç»Ÿã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[&#x2F;sys&#x2F;fs&#x2F;cgroup]$ cat &#x2F;proc&#x2F;cgroups</span><br><span class="line">#subsys_name	hierarchy	num_cgroups	enabled</span><br><span class="line">cpuset	8	4	1</span><br><span class="line">cpu	2	74	1</span><br><span class="line">cpuacct	2	74	1</span><br><span class="line">memory	11	74	1</span><br><span class="line">devices	6	69	1</span><br><span class="line">freezer	10	4	1</span><br><span class="line">net_cls	4	4	1</span><br><span class="line">blkio	9	69	1</span><br><span class="line">perf_event	5	4	1</span><br><span class="line">hugetlb	7	4	1</span><br><span class="line">pids	3	69	1</span><br><span class="line">net_prio	4	4	1</span><br></pre></td></tr></table></figure>
<p>ä»å·¦åˆ°å³å­—æ®µçš„å«ä¹‰åˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li>subsys_name: subsystemçš„åå­—</li>
<li>hierarchy: subsystemæ‰€å…³è”åˆ°çš„cgroupæ ‘çš„IDï¼Œå¦‚æœå¤šä¸ªsubsystemå…³è”åˆ°åŒä¸€é¢—cgroupæ ‘ï¼Œé‚£ä¹ˆä»–ä»¬çš„è¿™ä¸ªå­—æ®µå°†ä¸€æ ·ï¼Œæ¯”å¦‚è¿™é‡Œçš„cpuå’Œcpuacctå°±ä¸€æ ·ï¼Œè¡¨ç¤ºä»–ä»¬ç»‘å®šåˆ°äº†åŒä¸€é¢—æ ‘ã€‚å¦‚æœå‡ºç°ä¸‹é¢çš„æƒ…å†µï¼Œè¿™ä¸ªå­—æ®µå°†ä¸º0ï¼š<ul>
<li>å½“å‰subsystemæ²¡æœ‰å’Œä»»ä½•cgroupæ ‘ç»‘å®š</li>
<li>å½“å‰subsystemå·²ç»å’Œcgroup v2çš„æ ‘ç»‘å®š</li>
<li>å½“å‰subsystemæ²¡æœ‰è¢«å†…æ ¸å¼€å¯</li>
</ul>
</li>
<li>num_cgroups: subsystemæ‰€å…³è”çš„cgroupæ ‘ä¸­è¿›ç¨‹ç»„çš„ä¸ªæ•°ï¼Œä¹Ÿå³æ ‘ä¸ŠèŠ‚ç‚¹çš„ä¸ªæ•°</li>
<li>enabled: 1è¡¨ç¤ºå¼€å¯ï¼Œ0è¡¨ç¤ºæ²¡æœ‰è¢«å¼€å¯(å¯ä»¥é€šè¿‡è®¾ç½®å†…æ ¸çš„å¯åŠ¨å‚æ•°â€œcgroup_disableâ€æ¥æ§åˆ¶subsystemçš„å¼€å¯).</li>
</ol>
<p><a href="https://www.kernel.org/doc/Documentation/cgroup-v1/" target="_blank" rel="noopener">Cgroupçš„å†…æ ¸æ–‡æ¡£</a>å¯¹å„ cgroup å’Œ subsystem æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œä»¥ä¸‹æ˜¯æ¯ä¸ª subsystem åŠŸèƒ½ç®€è®°ï¼š</p>
<ol>
<li>cpu ï¼šç”¨æ¥<strong>é™åˆ¶</strong>cgroupçš„CPUä½¿ç”¨ç‡</li>
<li>cpuacct ï¼šç”¨æ¥<strong>ç»Ÿè®¡</strong>cgroupçš„CPUçš„ä½¿ç”¨ç‡</li>
<li>cpuset ï¼š ç”¨æ¥ç»‘å®šcgroupåˆ°æŒ‡å®šCPUå“ªä¸ªæ ¸ä¸Šå’ŒNUMAèŠ‚ç‚¹</li>
<li>memory ï¼šé™åˆ¶å’Œç»Ÿè®¡cgroupçš„å†…å­˜çš„ä½¿ç”¨ç‡ï¼ŒåŒ…æ‹¬process memory, kernel memory, å’Œswap</li>
<li>devices ï¼š é™åˆ¶cgroupåˆ›å»º(mknod)å’Œè®¿é—®è®¾å¤‡çš„æƒé™</li>
<li>freezer ï¼š suspendå’Œrestoreä¸€ä¸ªcgroupä¸­çš„æ‰€æœ‰è¿›ç¨‹</li>
<li>net_cls ï¼š å°†ä¸€ä¸ªcgroupä¸­è¿›ç¨‹åˆ›å»ºçš„æ‰€æœ‰ç½‘ç»œåŒ…åŠ ä¸Šä¸€ä¸ªclassidæ ‡è®°ï¼Œç”¨äºtcå’Œiptablesã€‚ åªå¯¹å‘å‡ºå»çš„ç½‘ç»œåŒ…ç”Ÿæ•ˆï¼Œå¯¹æ”¶åˆ°çš„ç½‘ç»œåŒ…ä¸èµ·ä½œç”¨</li>
<li>blkio ï¼š é™åˆ¶cgroupè®¿é—®å—è®¾å¤‡çš„IOé€Ÿåº¦</li>
<li>perf_event ï¼š å¯¹cgroupè¿›è¡Œæ€§èƒ½ç›‘æ§</li>
<li>net_prio ï¼š é’ˆå¯¹æ¯ä¸ªç½‘ç»œæ¥å£è®¾ç½®cgroupçš„è®¿é—®ä¼˜å…ˆçº§</li>
<li>hugetlb ï¼š é™åˆ¶cgroupçš„huge pagesçš„ä½¿ç”¨é‡</li>
<li>pids ï¼šé™åˆ¶ä¸€ä¸ªcgroupåŠå…¶å­å­™cgroupä¸­çš„æ€»è¿›ç¨‹æ•°</li>
</ol>
<p>è¿™äº›å­ç³»ç»Ÿçš„æ’åˆ—é¡ºåºï¼Œå°±æ˜¯å¼•å…¥Linuxå†…æ ¸é¡ºåºï¼Œæœ€æ—©çš„æ˜¯cpu subsystem ï¼Œå¼•å…¥è‡ªLinux 2.6.24ï¼Œæœ€æ™šçš„æ˜¯pid subsystem ï¼Œå¼•å…¥è‡ª Linux 4.3ã€‚</p>
<h2 id="æŸ¥çœ‹å­ç³»ç»Ÿå’Œcgroupçš„æŒ‚è½½"><a href="#æŸ¥çœ‹å­ç³»ç»Ÿå’Œcgroupçš„æŒ‚è½½" class="headerlink" title="æŸ¥çœ‹å­ç³»ç»Ÿå’Œcgroupçš„æŒ‚è½½"></a>æŸ¥çœ‹å­ç³»ç»Ÿå’Œcgroupçš„æŒ‚è½½</h2><p>cgroupæ˜¯é€šè¿‡æ–‡ä»¶ç³»ç»Ÿå®ç°çš„ï¼Œæ¯ä¸ªç›®å½•éƒ½æ˜¯ä¸€ä¸ªcgroupèŠ‚ç‚¹ï¼Œç›®å½•ä¸­çš„å­ç›®å½•éƒ½æ˜¯å­cgroupèŠ‚ç‚¹ï¼Œè¿™æ ·å°±å½¢æˆäº† cgroupçš„ hierarchy ç‰¹æ€§ã€‚</p>
<p>cgroupä¼šæŒ‚è½½åˆ° <code>/sys/fs/cgroup/</code>ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹çš„ç›®å½•åŸºæœ¬éƒ½æ˜¯subsystemï¼Œ<code>systemd</code>ç›®å½•é™¤å¤–ï¼ˆå®ƒæ˜¯ systemd è‡ªå»ºåœ¨cgroupä¸‹çš„ç›®å½•ï¼Œä½†ä¸æ˜¯å­ç³»ç»Ÿï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[&#x2F;sys&#x2F;fs&#x2F;cgroup]$ ll</span><br><span class="line">total 0</span><br><span class="line">dr-xr-xr-x 6 root root  0 Aug 30 09:30 blkio</span><br><span class="line">lrwxrwxrwx 1 root root 11 Aug 30 09:30 cpu -&gt; cpu,cpuacct</span><br><span class="line">lrwxrwxrwx 1 root root 11 Aug 30 09:30 cpuacct -&gt; cpu,cpuacct</span><br><span class="line">dr-xr-xr-x 7 root root  0 Aug 30 09:30 cpu,cpuacct</span><br><span class="line">dr-xr-xr-x 3 root root  0 Aug 30 09:30 cpuset</span><br><span class="line">dr-xr-xr-x 6 root root  0 Aug 30 09:30 devices</span><br><span class="line">dr-xr-xr-x 3 root root  0 Aug 30 09:30 freezer</span><br><span class="line">dr-xr-xr-x 3 root root  0 Aug 30 09:30 hugetlb</span><br><span class="line">dr-xr-xr-x 6 root root  0 Aug 30 09:30 memory</span><br><span class="line">lrwxrwxrwx 1 root root 16 Aug 30 09:30 net_cls -&gt; net_cls,net_prio</span><br><span class="line">dr-xr-xr-x 3 root root  0 Aug 30 09:30 net_cls,net_prio</span><br><span class="line">lrwxrwxrwx 1 root root 16 Aug 30 09:30 net_prio -&gt; net_cls,net_prio</span><br><span class="line">dr-xr-xr-x 3 root root  0 Aug 30 09:30 perf_event</span><br><span class="line">dr-xr-xr-x 6 root root  0 Aug 30 09:30 pids</span><br><span class="line">dr-xr-xr-x 6 root root  0 Aug 30 09:30 systemd</span><br></pre></td></tr></table></figure>
<p>å‘ç°cpuã€cpuacctéƒ½æŒ‡å‘äº† <code>cpu,cpuacct</code> ç›®å½•ï¼ŒæŠŠå®ƒä»¬åˆæˆäº†1ä¸ªcgroupèŠ‚ç‚¹ã€‚å¦å¤– net_cls å’Œ net_prio ä¹Ÿéƒ½åˆåˆ°äº† <code>net_cls,net_prio</code> èŠ‚ç‚¹ï¼Œä¹Ÿå°±å½¢æˆäº†ä¸‹é¢è¿™å¹…å›¾çš„æ ·å­ï¼Œå¹¶æŠŠèµ„æºæ§åˆ¶åˆ†æˆäº†5ä¸ªç±»åˆ«ï¼šCPUã€å†…å­˜ã€ç½‘ç»œã€è¿›ç¨‹æ§åˆ¶ã€è®¾å¤‡ï¼Œå¦å¤–çš„<code>perf_event</code>æ˜¯cgroupå¯¹è‡ªèº«çš„ç›‘æ§ï¼Œä¸å½’äºèµ„æºæ§åˆ¶ã€‚</p>
<p><img src="http://img.lessisbetter.site/2020-08-30-cgroup-subsystem.png" alt=""></p>
<p>å­ç³»ç»ŸæŒ‚è½½åˆ°cgroupçš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ˜¯é€šè¿‡mountå‘½ä»¤å®ç°çš„ï¼Œç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½subsystemåˆ°cgroupï¼ŒæŸ¥çœ‹å·²ç»æŒ‚è½½çš„Cgroupï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[~]$ mount -t cgroup</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,release_agent&#x3D;&#x2F;lib&#x2F;systemd&#x2F;systemd-cgroups-agent,name&#x3D;systemd)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpu,cpuacct)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_cls,net_prio)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;hugetlb type cgroup (rw,nosuid,nodev,noexec,relatime,hugetlb)</span><br><span class="line">cgroup on &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æŸä¸ªè¿›ç¨‹æ‰€å±çš„cgroupï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[&#x2F;sys&#x2F;fs&#x2F;cgroup]$ # $$ä»£è¡¨å½“å‰è¿›ç¨‹</span><br><span class="line">[&#x2F;sys&#x2F;fs&#x2F;cgroup]$ cat &#x2F;proc&#x2F;$$&#x2F;cgroup</span><br><span class="line">11:memory:&#x2F;user.slice&#x2F;user-1000.slice&#x2F;session-269.scope</span><br><span class="line">10:freezer:&#x2F;</span><br><span class="line">9:blkio:&#x2F;user.slice</span><br><span class="line">8:cpuset:&#x2F;</span><br><span class="line">7:hugetlb:&#x2F;</span><br><span class="line">6:devices:&#x2F;user.slice</span><br><span class="line">5:perf_event:&#x2F;</span><br><span class="line">4:net_prio,net_cls:&#x2F;</span><br><span class="line">3:pids:&#x2F;user.slice</span><br><span class="line">2:cpuacct,cpu:&#x2F;user.slice&#x2F;user-1000.slice&#x2F;session-269.scope</span><br><span class="line">1:name&#x3D;systemd:&#x2F;user.slice&#x2F;user-1000.slice&#x2F;session-269.scope</span><br></pre></td></tr></table></figure>
<p>æ¯ä¸€è¡Œä»å·¦åˆ°å³ï¼Œç”¨<code>:</code>åˆ†å‰²ä¾æ¬¡æ˜¯ï¼š</p>
<ul>
<li><code>11</code>ï¼š cgroupç»§æ‰¿æ ‘çš„èŠ‚ç‚¹çš„ID</li>
<li><code>memory</code>: å½“å‰èŠ‚ç‚¹ä¸ŠæŒ‚è½½çš„å­ç³»ç»Ÿ</li>
<li><code>/user.slice/user-1000.slice/session-269.scope</code>: cgroupèŠ‚ç‚¹ç›¸å¯¹äºcgroupæ ¹ç›®å½•ä¸‹å­ç³»ç»Ÿçš„ç›¸å¯¹è·¯å¾„ï¼Œè½¬æ¢æˆç»å¯¹è·¯å¾„å°±æ˜¯ï¼š<code>/sys/fs/cgroup/memory/user.slice/user-1000.slice/session-269.scope</code></li>
</ul>
<h2 id="å†èŠcgroup-hierarchy"><a href="#å†èŠcgroup-hierarchy" class="headerlink" title="å†èŠcgroup hierarchy"></a>å†èŠcgroup hierarchy</h2><p>åœ¨ cpu,cpuacct å­ç³»ç»Ÿä¸‹åˆ›å»ºä¸€ä¸ªæµ‹è¯•cgroupèŠ‚ç‚¹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[/sys/fs/cgroup/cpu,cpuacct]$ sudo mkdir dabin_test_cpu_cgroup</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct]$ <span class="built_in">cd</span> dabin_test_cpu_cgroup</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct/dabin_test_cpu_cgroup]$ ls</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct/dabin_test_cpu_cgroup]$ ls cgroup.*</span><br><span class="line">cgroup.clone_children  cgroup.event_control  cgroup.procs</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct/dabin_test_cpu_cgroup]$ cat cgroup.clone_children</span><br><span class="line">0</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct/dabin_test_cpu_cgroup]$ cat cgroup.procs</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct/dabin_test_cpu_cgroup]$</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct/dabin_test_cpu_cgroup]$ ls notify_on_release tasks</span><br><span class="line">notify_on_release  tasks</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct/dabin_test_cpu_cgroup]$</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct/dabin_test_cpu_cgroup]$ cat tasks</span><br><span class="line">[/sys/fs/cgroup/cpu,cpuacct/dabin_test_cpu_cgroup]$ cat notify_on_release</span><br><span class="line">0</span><br></pre></td></tr></table></figure>
<p>cgroup hierarchy (ç»§æ‰¿æ ‘)ç»“æ„ï¼Œæ¯ä¸ªcgroupèŠ‚ç‚¹éƒ½åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li>cgroup.clone_children : è¢«cpusetæ§åˆ¶å™¨ä½¿ç”¨ï¼Œå€¼ä¸º1æ—¶å­cgroupåˆå§‹åŒ–æ—¶æ‹·è´çˆ¶cgroupçš„é…ç½®</li>
<li>cgroup.procs : cgroupä¸­çš„çº¿ç¨‹ç»„id</li>
<li>tasks : å½“å‰cgroupåŒ…å«çš„è¿›ç¨‹åˆ—è¡¨</li>
<li>notify_on_release : å€¼ä¸º0æˆ–1ï¼Œ1ä»£è¡¨å½“cgroupä¸­çš„æœ€å1ä¸ªtaské€€å‡ºï¼Œå¹¶ä¸”å­cgroupç§»é™¤æ—¶ï¼Œå†…æ ¸ä¼šåœ¨ç»§æ‰¿æ ‘æ ¹ç›®å½•è¿è¡Œ<code>release_agent</code>æ–‡ä»¶</li>
</ul>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ol>
<li><a href="https://kernel.googlesource.com/pub/scm/linux/kernel/git/glommer/memcg/+/cpu_stat/Documentation/cgroups" target="_blank" rel="noopener">Linux Kernel Cgroupçš„æ–‡æ¡£</a></li>
<li><a href="https://union-click.jd.com/jdc?e=&amp;p=AyIGZRtSFwsWB1EcXhUyFQ5WEloVCxMBURxrUV1KWQorAlBHU0VeBUVNR0ZbSkdETlcNVQtHRVNSUVNLXANBRA1XB14DS10cQQVYD21XHgBcGFIUAhsGUx9cJQEbBTJbEmFdcHkRSANGBhBDCnkmEVQeC2UaaxUDEwVWEl8RBhM3ZRtcJUN8B1QaUxMCFAFlGmsVBhoOUx9fFwESB1IfaxICGzeDtdnBl4nT2YZrJTIRN2UrWyUBIkU7HQxBABEGBhILHVdGAgcaXB0DQARWHQ4QVhFVVhkLEVciBVQaXxw%3D" target="_blank" rel="noopener">é˜¿é‡ŒåŒå­¦çš„ä¹¦ã€Šè‡ªå·±åŠ¨æ‰‹å†™Dockerã€‹</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/08/27/play-minikube/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/27/play-minikube/" class="post-title-link" itemprop="url">ç©è½¬minikube</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-27 21:30:41 / ä¿®æ”¹æ—¶é—´ï¼š21:51:40" itemprop="dateCreated datePublished" datetime="2020-08-27T21:30:41+08:00">2020-08-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>minikubeå¾ˆå¥½ï¼Œä½†æŸäº›åŸå› é€ æˆå›½å†…ç”¨èµ·æ¥æ¯”è¾ƒæ…¢ï¼Œè¦å„ç§æŒ‚ä»£ç†ã€é•œåƒåŠ é€Ÿã€‚</p>
<h2 id="minikubeåŸç†"><a href="#minikubeåŸç†" class="headerlink" title="minikubeåŸç†"></a>minikubeåŸç†</h2><p><img src="http://img.lessisbetter.site/2020-08-minikube.jpeg" alt=""></p>
<h2 id="å®‰è£…è½¯ä»¶"><a href="#å®‰è£…è½¯ä»¶" class="headerlink" title="å®‰è£…è½¯ä»¶"></a>å®‰è£…è½¯ä»¶</h2><ol>
<li><p>å®‰è£…minikubeï¼Œ1åˆ†é’Ÿï¼Œå¦‚æœæä¾›çš„å‘½ä»¤è¡Œä¸‹è½½ä¸ä¸‹æ¥ï¼Œå°±æµè§ˆå™¨ä¸‹è½½ä¸‹æ¥ï¼Œæ”¾åˆ°å¢åŠ å¯æ‰§è¡Œï¼Œç„¶åæ”¾åˆ°binç›®å½•å³å¯ï¼š<br><a href="https://yq.aliyun.com/articles/691500" target="_blank" rel="noopener">https://yq.aliyun.com/articles/691500</a></p>
</li>
<li><p>centoså®‰è£…virtualboxï¼Œ2åˆ†é’Ÿå®‰è£…å®Œæˆ:<br><a href="https://wiki.centos.org/zh/HowTos/Virtualization/VirtualBox" target="_blank" rel="noopener">https://wiki.centos.org/zh/HowTos/Virtualization/VirtualBox</a></p>
</li>
<li><p>å®‰è£…kubectlï¼š<br><a href="https://blog.csdn.net/yuanjunlai141/article/details/79469071" target="_blank" rel="noopener">https://blog.csdn.net/yuanjunlai141/article/details/79469071</a></p>
</li>
</ol>
<h2 id="é¦–æ¬¡å¯åŠ¨"><a href="#é¦–æ¬¡å¯åŠ¨" class="headerlink" title="é¦–æ¬¡å¯åŠ¨"></a>é¦–æ¬¡å¯åŠ¨</h2><p>å¯åŠ¨å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">minikube start --image-mirror-country cn \</span><br><span class="line">    --iso-url&#x3D;https:&#x2F;&#x2F;kubernetes.oss-cn-hangzhou.aliyuncs.com&#x2F;minikube&#x2F;iso&#x2F;minikube-v1.7.3.iso \</span><br><span class="line">    --docker-env http_proxy&#x3D;http:&#x2F;&#x2F;192.168.0.104:1087 \</span><br><span class="line">    --docker-env https_proxy&#x3D;http:&#x2F;&#x2F;192.168.0.104:1087 \</span><br><span class="line">    --docker-env no_proxy&#x3D;localhost,127.0.0.1,10.96.0.0&#x2F;12,192.168.99.0&#x2F;24,192.168.39.0&#x2F;24 \</span><br><span class="line">    --registry-mirror&#x3D;&quot;https:&#x2F;&#x2F;a90tkz28.mirror.aliyuncs.com&quot; \</span><br><span class="line">    --image-repository&#x3D;&quot;registry.cn-hangzhou.aliyuncs.com&#x2F;google_containers&quot; \</span><br><span class="line">    --insecure-registry&#x3D;192.168.9.8 \</span><br><span class="line">    --kubernetes-version&#x3D;v1.18.3</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨minikubeå¯ä»¥æŸ¥çœ‹å¸®åŠ©flagå¸®åŠ©ä¿¡æ¯ï¼š</p>
<ul>
<li><code>--image-mirror-country</code>: éœ€è¦ä½¿ç”¨çš„é•œåƒé•œåƒçš„å›½å®¶/åœ°åŒºä»£ç ã€‚ç•™ç©ºä»¥ä½¿ç”¨å…¨çƒä»£ç ã€‚å¯¹äºä¸­å›½å¤§é™†ç”¨æˆ·ï¼Œè¯·å°†å…¶è®¾ç½®ä¸º<br>cn</li>
<li><code>--docker-env</code>: æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡å‘dockeræŒ‚httpä»£ç†ï¼Œå¦åˆ™å›½å†…å¯èƒ½å‡ºç°æ‹‰ä¸åˆ°é•œåƒçš„é—®é¢˜ã€‚æŒ‚ä»£ç†è¿˜éœ€è¦ä¸€ä¸ªå¿…è¦æ¡ä»¶ï¼Œåœ¨ä¸»æœºä¸Šä½¿ç”¨SSå¼€å¯ä»£ç†ã€‚æŒ‚äº†ä»£ç†å¯èƒ½ä¹Ÿå¾ˆéš¾æ‹‰åˆ°ï¼Œä½†ä¸æŒ‚ä»£ç†ï¼Œå‡ ä¹æ‹‰ä¸ä¸‹æ¥é•œåƒã€‚</li>
<li><code>--registry-mirror</code>: ä¼ é€’ç»™ Docker å®ˆæŠ¤è¿›ç¨‹çš„æ³¨å†Œè¡¨é•œåƒã€‚æ•ˆæœæœ€å¥½çš„é•œåƒåŠ é€Ÿå™¨ï¼š<code>--registry-mirror=&quot;https://a90tkz28.mirror.aliyuncs.com&quot;</code></li>
<li><code>--image-repository</code> : å¦‚æœä¸èƒ½ä»gcr.ioæ‹‰é•œåƒï¼Œé…ç½®minikubeä¸­dockeræ‹‰é•œåƒçš„åœ°æ–¹</li>
<li><code>--kubernetes-version</code>ï¼š æŒ‡å®šè¦éƒ¨ç½²çš„k8sç‰ˆæœ¬</li>
</ul>
<p>minikubeå†…æ‹‰ä¸åˆ°é•œåƒçš„æŠ¥é”™:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl describe pod</span><br><span class="line">  Type     Reason     Age                    From               Message</span><br><span class="line">  ----     ------     ----                   ----               -------</span><br><span class="line">  Warning  Failed     2m59s (x4 over 4m36s)  kubelet, minikube  Failed to pull image &quot;kubeguide&#x2F;redis-master&quot;: rpc error: code &#x3D; Unknown desc &#x3D; Error response from daemon: Get https:&#x2F;&#x2F;registry-1.docker.io&#x2F;v2&#x2F;: proxyconnect tcp: dial tcp 192.168.0.104:1087: connect: connection refused</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨æ—¥å¿—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ minikube start --image-mirror-country cn \</span><br><span class="line">    --iso-url&#x3D;https:&#x2F;&#x2F;kubernetes.oss-cn-hangzhou.aliyuncs.com&#x2F;minikube&#x2F;iso&#x2F;minikube-v1.7.3.iso \</span><br><span class="line">    --docker-env http_proxy&#x3D;http:&#x2F;&#x2F;192.168.0.104:1087 \</span><br><span class="line">    --docker-env https_proxy&#x3D;http:&#x2F;&#x2F;192.168.0.104:1087 \</span><br><span class="line">    --docker-env no_proxy&#x3D;localhost,127.0.0.1,10.96.0.0&#x2F;12,192.168.99.0&#x2F;24,192.168.39.0&#x2F;24 \</span><br><span class="line">    --registry-mirror&#x3D;&quot;https:&#x2F;&#x2F;a90tkz28.mirror.aliyuncs.com&quot; \</span><br><span class="line">    --image-repository&#x3D;&quot;registry.cn-hangzhou.aliyuncs.com&#x2F;google_containers&quot; \</span><br><span class="line">    --insecure-registry&#x3D;192.168.9.8</span><br><span class="line">ğŸ˜„  Darwin 10.15.3 ä¸Šçš„ minikube v1.12.3</span><br><span class="line">âœ¨  æ ¹æ®ç°æœ‰çš„é…ç½®æ–‡ä»¶ä½¿ç”¨ virtualbox é©±åŠ¨ç¨‹åº</span><br><span class="line">ğŸ‘  Starting control plane node minikube in cluster minikube</span><br><span class="line">ğŸƒ  Updating the running virtualbox &quot;minikube&quot; VM ...</span><br><span class="line">ğŸ³  æ­£åœ¨ Docker 19.03.6 ä¸­å‡†å¤‡ Kubernetes v1.18.3â€¦</span><br><span class="line">    â–ª env http_proxy&#x3D;http:&#x2F;&#x2F;192.168.0.104:1087</span><br><span class="line">    â–ª env https_proxy&#x3D;http:&#x2F;&#x2F;192.168.0.104:1087</span><br><span class="line">    â–ª env no_proxy&#x3D;localhost,127.0.0.1,10.96.0.0&#x2F;12,192.168.99.0&#x2F;24,192.168.39.0&#x2F;24</span><br><span class="line">    &gt; kubeadm.sha256: 65 B &#x2F; 65 B [--------------------------] 100.00% ? p&#x2F;s 0s</span><br><span class="line">    &gt; kubelet.sha256: 65 B &#x2F; 65 B [--------------------------] 100.00% ? p&#x2F;s 0s</span><br><span class="line">    &gt; kubeadm: 37.97 MiB &#x2F; 37.97 MiB [--------------] 100.00% 320.45 MiB p&#x2F;s 0s</span><br><span class="line">    &gt; kubelet: 108.04 MiB &#x2F; 108.04 MiB [---------] 100.00% 514.43 KiB p&#x2F;s 3m36s</span><br><span class="line">ğŸ”  Verifying Kubernetes components...</span><br><span class="line">ğŸŒŸ  Enabled addons: default-storageclass, storage-provisioner</span><br><span class="line">ğŸ„  å®Œæˆï¼kubectl å·²ç»é…ç½®è‡³ &quot;minikube&quot;</span><br></pre></td></tr></table></figure>
<p>åšå“ªäº›äº‹ï¼Ÿ</p>
<ol>
<li>åˆ›å»ºè™šæ‹Ÿæœºâ€minikubeâ€</li>
<li>ç”Ÿæˆkubectlä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨è¯¥é…ç½®è¿æ¥é›†ç¾¤ï¼š~/.kube/config</li>
<li>åœ¨è™šæ‹Ÿæœºé‡Œçš„å®¹å™¨ä¸Šå¯åŠ¨k8s</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">$ minikube ssh</span><br><span class="line">                         _             _</span><br><span class="line">            _         _ ( )           ( )</span><br><span class="line">  ___ ___  (_)  ___  (_)| |&#x2F;&#39;)  _   _ | |_      __</span><br><span class="line">&#x2F;&#39; _ &#96; _ &#96;\| |&#x2F;&#39; _ &#96;\| || , &lt;  ( ) ( )| &#39;_&#96;\  &#x2F;&#39;__&#96;\</span><br><span class="line">| ( ) ( ) || || ( ) || || |\&#96;\ | (_) || |_) )(  ___&#x2F;</span><br><span class="line">(_) (_) (_)(_)(_) (_)(_)(_) (_)&#96;\___&#x2F;&#39;(_,__&#x2F;&#39;&#96;\____)</span><br><span class="line"></span><br><span class="line">$</span><br><span class="line">$ docker info</span><br><span class="line">Client:</span><br><span class="line"> Debug Mode: false</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Containers: 14</span><br><span class="line">  Running: 14</span><br><span class="line">  Paused: 0</span><br><span class="line">  Stopped: 0</span><br><span class="line"> Images: 10</span><br><span class="line"> Server Version: 19.03.6</span><br><span class="line"> Storage Driver: overlay2</span><br><span class="line">  Backing Filesystem: extfs</span><br><span class="line">  Supports d_type: true</span><br><span class="line">  Native Overlay Diff: true</span><br><span class="line"> Logging Driver: json-file</span><br><span class="line"> Cgroup Driver: cgroupfs</span><br><span class="line"> Plugins:</span><br><span class="line">  Volume: local</span><br><span class="line">  Network: bridge host ipvlan macvlan null overlay</span><br><span class="line">  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog</span><br><span class="line"> Swarm: inactive</span><br><span class="line"> Runtimes: runc</span><br><span class="line"> Default Runtime: runc</span><br><span class="line"> Init Binary: docker-init</span><br><span class="line"> containerd version: 35bd7a5f69c13e1563af8a93431411cd9ecf5021</span><br><span class="line"> runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> init version: fec3683</span><br><span class="line"> Security Options:</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: default</span><br><span class="line"> Kernel Version: 4.19.94</span><br><span class="line"> Operating System: Buildroot 2019.02.9</span><br><span class="line"> OSType: linux</span><br><span class="line"> Architecture: x86_64</span><br><span class="line"> CPUs: 2</span><br><span class="line"> Total Memory: 3.754GiB</span><br><span class="line"> Name: minikube</span><br><span class="line"> ID: DSF4:HEQB:HTUU:OXRS:ZBWC:ESX4:WEST:UFDC:WAW5:5CDV:PITM:BEXZ</span><br><span class="line"> Docker Root Dir: &#x2F;var&#x2F;lib&#x2F;docker</span><br><span class="line"> Debug Mode: false</span><br><span class="line"> HTTP Proxy: http:&#x2F;&#x2F;192.168.0.104:1087</span><br><span class="line"> HTTPS Proxy: http:&#x2F;&#x2F;192.168.0.104:1087</span><br><span class="line"> No Proxy: localhost,127.0.0.1,10.96.0.0&#x2F;12,192.168.99.0&#x2F;24,192.168.39.0&#x2F;24</span><br><span class="line"> Registry: https:&#x2F;&#x2F;index.docker.io&#x2F;v1&#x2F;</span><br><span class="line"> Labels:</span><br><span class="line">  provider&#x3D;virtualbox</span><br><span class="line"> Experimental: false</span><br><span class="line"> Insecure Registries:</span><br><span class="line">  192.168.9.8</span><br><span class="line">  10.96.0.0&#x2F;12</span><br><span class="line">  127.0.0.0&#x2F;8</span><br><span class="line"> Registry Mirrors:</span><br><span class="line">  https:&#x2F;&#x2F;a90tkz28.mirror.aliyuncs.com&#x2F;</span><br><span class="line"> Live Restore Enabled: false</span><br><span class="line"> Product License: Community Engine</span><br><span class="line"></span><br><span class="line">$ exit</span><br><span class="line">logout</span><br></pre></td></tr></table></figure>
<p>Registry Mirrorså¯¹åº”çš„æ˜¯é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿï¼ŒHTTP proxyä¹Ÿé…ç½®ä¸Šäº†ï¼Œå¦‚æœå¯åŠ¨åï¼Œå‘ç°æ²¡æœ‰æ”¹å˜ï¼Œéœ€è¦åˆ é™¤è¿‡å»åˆ›å»ºçš„minikubeï¼Œå…¨éƒ¨æ¸…ç†ä¸€éã€‚</p>
<h2 id="minikubeå¸¸ç”¨å‘½ä»¤"><a href="#minikubeå¸¸ç”¨å‘½ä»¤" class="headerlink" title="minikubeå¸¸ç”¨å‘½ä»¤"></a>minikubeå¸¸ç”¨å‘½ä»¤</h2><ul>
<li>é›†ç¾¤çŠ¶æ€ï¼š minikube status</li>
<li>æš‚åœå’Œæ¢å¤é›†ç¾¤ï¼Œä¸ç”¨çš„æ—¶å€™æŠŠå®ƒæš‚åœæ‰ï¼ŒèŠ‚çº¦ä¸»æœºçš„CPUå’Œå†…å­˜ï¼š minikube pauseï¼Œ minikube unpause</li>
<li>åœæ­¢é›†ç¾¤ï¼š minikube stop</li>
<li>åˆ é™¤é›†ç¾¤ï¼Œé‡åˆ°é—®é¢˜æ—¶ï¼Œæ¸…ç†ä¸€æ³¢æ•°æ®ï¼š minikube delete</li>
<li>æŸ¥çœ‹é›†ç¾¤IPï¼Œkubectlå°±æ˜¯è¿è¿™ä¸ªIPï¼š minikube ip</li>
<li>è¿›å…¥minikubeè™šæ‹Ÿæœºï¼Œæ•´ä¸ªk8sé›†ç¾¤è·‘åœ¨è¿™é‡Œé¢ï¼š minikube ssh</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/08/27/sync-code-to-server-with-sftp-in-vscode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/27/sync-code-to-server-with-sftp-in-vscode/" class="post-title-link" itemprop="url">VSCodeåˆ©ç”¨SFTPä¸Šä¼ ä»£ç åˆ°æœåŠ¡å™¨</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-27 20:24:00 / ä¿®æ”¹æ—¶é—´ï¼š20:37:00" itemprop="dateCreated datePublished" datetime="2020-08-27T20:24:00+08:00">2020-08-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>VSCodeå·²ç»æ”¯æŒè¿œç¨‹å¼€å‘ï¼Œå¯ä»¥æŠŠä»£ç è‡ªåŠ¨ä»æœ¬åœ°å’ŒæœåŠ¡å™¨è¿›è¡ŒåŒæ­¥ã€‚</p>
<p>ä¸ºäº†æŸäº›å®éªŒæäº†ä¸€æ¡Ubuntu 14.04çš„æœåŠ¡å™¨ï¼Œç»“æœVSCodeè¯´è¿œç¨‹æœåŠ¡å™¨ä¸æ”¯æŒï¼Œå°±åªèƒ½å¦è°‹å®ƒè·¯äº†ï¼Œåˆ©ç”¨SFTPå®ç°æœ¬åœ°å’ŒæœåŠ¡å™¨ç«¯çš„ä»£ç åŒæ­¥ã€‚</p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol>
<li>VSCodeåº”ç”¨å¸‚åœºå®‰è£…SFTPæ’ä»¶</li>
<li>åœ¨é¡¹ç›®ç›®å½•ä¸‹å»ºç«‹SFTPçš„é…ç½®æ–‡ä»¶ï¼š<code>.vscode/sftp.json</code>ï¼Œå†…å®¹å¦‚ä¸‹</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"root"</span>,</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"192.168.9.xxx"</span>,</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"sftp"</span>,</span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">22</span>,</span><br><span class="line">    <span class="attr">"username"</span>: <span class="string">"centos"</span>,</span><br><span class="line">    <span class="attr">"privateKeyPath"</span>: <span class="string">"/Users/shitaibin/.ssh/id_xxx"</span>,</span><br><span class="line">    <span class="attr">"remotePath"</span>: <span class="string">"/home/centos/workspace/docker/notes"</span>,</span><br><span class="line">    <span class="attr">"uploadOnSave"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"ignore"</span>: [<span class="string">".vscode"</span>, <span class="string">".git"</span>, <span class="string">".DS_Store"</span>, <span class="string">"node_modules"</span>, <span class="string">"vendor"</span>],</span><br><span class="line">    <span class="attr">"localPath"</span>:<span class="string">"."</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç™»å½•æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨å¯†ç æˆ–è€…ç§é’¥ï¼Œä¸Šé¢æ–‡ä»¶çš„ç¤ºä¾‹ä½¿ç”¨ç§é’¥ï¼Œå¦‚æœä½¿ç”¨å¯†ç ï¼Œå¢åŠ ä¸€é¡¹<code>password</code>å³å¯ã€‚</p>
<p><code>uploadOnSave</code>é…ç½®é¡¹è®¾ç½®ä¸ºtrueï¼Œèƒ½å¤Ÿç¡®ä¿æ–‡ä»¶ä¿å­˜æ—¶ï¼Œè‡ªåŠ¨ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæ— éœ€æ‰‹åŠ¨ä¸Šä¼ ã€‚</p>
<ol start="3">
<li><p>åˆæ¬¡ä¸Šä¼ åˆ°æœåŠ¡å™¨</p>
<p> a. Ctrl + Shift + Pï¼Œè¾“å…¥<code>SFTP</code>ï¼Œé€‰æ‹©<code>Sync Local -&gt; Remote</code>å³å¯<br> b. VSCodeåº•éƒ¨çŠ¶æ€æ ï¼Œä¼šæ˜¾ç¤ºSFTPï¼Œå¦‚æœåœ¨åŠ¨æ€å˜åŒ–ï¼Œè¯´æ˜åœ¨ä¸Šä¼ æ–‡ä»¶</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/08/18/os/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/18/os/" class="post-title-link" itemprop="url">os</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-18 08:11:30" itemprop="dateCreated datePublished" datetime="2020-08-18T08:11:30+08:00">2020-08-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/07/29/go-time-date-timestamp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/29/go-time-date-timestamp/" class="post-title-link" itemprop="url">Goè¯­è¨€æ—¥æœŸå’Œæ—¶é—´æˆ³è½¬æ¢</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-07-29 19:48:59 / ä¿®æ”¹æ—¶é—´ï¼š19:49:32" itemprop="dateCreated datePublished" datetime="2020-07-29T19:48:59+08:00">2020-07-29</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å­—ç¬¦ä¸²æ ¼å¼æ—¥æœŸã€time.Timeç±»å‹ã€æ•´å½¢æ—¶é—´æˆ³ä¸‰è€…ä¹‹é—´çš„è½¬æ¢å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://img.lessisbetter.site/2020-07-go-time-date-transform.png" alt=""></p>
<p>æœ‰2ç‚¹è¦æ³¨æ„ï¼š</p>
<ol>
<li>å­—ç¬¦ä¸²æ—¥æœŸå’Œæ—¶é—´æˆ³ä¹‹é—´ä¸èƒ½ç›´æ¥è½¬æ¢ï¼Œéœ€è¦é€šè¿‡time.Timeå®Œæˆã€‚</li>
<li>æ¶‰åŠå­—ç¬¦ä¸²æ—¥æœŸçš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²æ—¥æœŸæ ¼å¼ä¸€å®šè¦ä»¥Goè¯ç”Ÿçš„æ—¶é—´ä¸ºåŸºå‡†ï¼Œè€Œä¸æ˜¯éšæ„çš„æ—¶é—´ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ—¶é—´è½¬æ¢ä¸æ­£ç¡®ã€‚æ‰€ä»¥ï¼Œä»¥ä¸‹Demoä¸­çš„æ—¥æœŸæ ¼å¼æ˜¯é€šç”¨çš„ã€‚</li>
<li>å­—ç¬¦ä¸²æ—¥æœŸæ ¼å¼è¦ä¸çœŸå®çš„æ—¥æœŸæ ¼å¼å®Œå…¨åŒ¹é…ï¼Œå¦åˆ™ä¼šè§£ææ—¶é—´ä¸æ­£ç¡®ã€‚æ¯”å¦‚è®¾ç½®çš„æ ¼å¼ä¸º<code>2006-01-02</code>ï¼Œå®é™…æ—¥æœŸæ ¼å¼ä¸º<code>2006-1-2</code>æ—¶ä¼šè§£æé”™è¯¯ã€‚</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Date2Time</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"&gt;&gt; Date2Time"</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"&lt;&lt; Date2Time"</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ä¸€å®šè¦ä»¥Goè¯ç”Ÿçš„æ—¶é—´ä¸ºåŸºå‡†</span></span><br><span class="line">	<span class="comment">// 2006å¹´1æœˆ2å·ï¼ŒMSTæ—¶åŒºï¼Œä¸‹åˆ3:04åˆ†ä¸ºåŸºå‡†</span></span><br><span class="line">	<span class="keyword">const</span> dateFormat = <span class="string">"Jan 2, 2006 at 3:04pm (MST)"</span></span><br><span class="line">	t, _ := time.Parse(dateFormat, <span class="string">"May 20, 2020 at 0:00am (UTC)"</span>)</span><br><span class="line">	fmt.Println(t)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> shortForm = <span class="string">"2006-Jan-02"</span></span><br><span class="line">	t, _ = time.Parse(shortForm, <span class="string">"2020-May-20"</span>)</span><br><span class="line">	fmt.Println(t)</span><br><span class="line"></span><br><span class="line">	t, _ = time.Parse(<span class="string">"01/02/2006"</span>, <span class="string">"05/20/2020"</span>)</span><br><span class="line">	fmt.Println(t)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Time2Date</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"&gt;&gt; Time2Date"</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"&lt;&lt; Time2Date"</span>)</span><br><span class="line"></span><br><span class="line">	tm := time.Now()</span><br><span class="line">	fmt.Println(tm.Format(<span class="string">"2006-01-02 03:04:05 PM"</span>))</span><br><span class="line">	fmt.Println(tm.Format(<span class="string">"2006-1-2 03:04:05 PM"</span>))</span><br><span class="line">	fmt.Println(tm.Format(<span class="string">"2006-Jan-02 03:04:05 PM"</span>))</span><br><span class="line">	fmt.Println(tm.Format(<span class="string">"02/01/2006 03:04:05 PM"</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Timestamp2Time</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"&gt;&gt; Timestamp2Time"</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"&lt;&lt; Timestamp2Time"</span>)</span><br><span class="line"></span><br><span class="line">	ts := <span class="keyword">int64</span>(<span class="number">1595900001</span>)</span><br><span class="line">	tm := time.Unix(ts, <span class="number">0</span>)</span><br><span class="line">	fmt.Println(tm)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Time2Timestamp</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"&gt;&gt; Time2Timestamp"</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"&lt;&lt; Time2Timestamp"</span>)</span><br><span class="line"></span><br><span class="line">	tm := time.Now()</span><br><span class="line">	ts := tm.Unix()</span><br><span class="line">	fmt.Println(ts)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	Date2Time()</span><br><span class="line">	Time2Date()</span><br><span class="line">	Timestamp2Time()</span><br><span class="line">	Time2Timestamp()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; Date2Time</span><br><span class="line">2020-05-20 00:00:00 +0000 UTC</span><br><span class="line">2020-05-20 00:00:00 +0000 UTC</span><br><span class="line">2020-05-20 00:00:00 +0000 UTC</span><br><span class="line">&lt;&lt; Date2Time</span><br><span class="line">&gt;&gt; Time2Date</span><br><span class="line">2020-07-28 09:35:46 AM</span><br><span class="line">2020-7-28 09:35:46 AM</span><br><span class="line">2020-Jul-28 09:35:46 AM</span><br><span class="line">28&#x2F;07&#x2F;2020 09:35:46 AM</span><br><span class="line">&lt;&lt; Time2Date</span><br><span class="line">&gt;&gt; Timestamp2Time</span><br><span class="line">2020-07-28 09:33:21 +0800 CST</span><br><span class="line">&lt;&lt; Timestamp2Time</span><br><span class="line">&gt;&gt; Time2Timestamp</span><br><span class="line">1595900146</span><br><span class="line">&lt;&lt; Time2Timestamp</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/07/28/about-ssh/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/28/about-ssh/" class="post-title-link" itemprop="url">SSHå¸¸ç”¨å‘½ä»¤å’Œé…ç½®</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-07-28 21:11:15 / ä¿®æ”¹æ—¶é—´ï¼š21:12:11" itemprop="dateCreated datePublished" datetime="2020-07-28T21:11:15+08:00">2020-07-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç”ŸæˆSSHå¯†é’¥"><a href="#ç”ŸæˆSSHå¯†é’¥" class="headerlink" title="ç”ŸæˆSSHå¯†é’¥"></a>ç”ŸæˆSSHå¯†é’¥</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -f ~/.ssh/id_rsa -C <span class="string">"temp user"</span> -N <span class="string">""</span></span><br></pre></td></tr></table></figure>
<p>-tï¼šæŒ‡å®šåŠ å¯†ç®—æ³•<br>-fï¼šæŒ‡å®šè·¯å¾„<br>-Cï¼šæ³¨é‡Šï¼Œå¯ä»¥å¡«å†™ç”¨æˆ·åæˆ–é‚®ç®±<br>-Nï¼šå¯†ç </p>
<p>æŒ‡å®šä»¥ä¸Š<code>fã€Cã€N</code>è¿™3ä¸ªå‚æ•°ï¼Œå¯ä»¥é¿å…äº¤äº’å¼é—®ç­”ï¼Œå¿«é€Ÿç”Ÿæˆå¯†é’¥ï¼Œåœ¨è„šæœ¬ä¸­ä½¿ç”¨å¾ˆæ–¹ä¾¿ã€‚</p>
<h2 id="SSHå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶"><a href="#SSHå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶" class="headerlink" title="SSHå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶"></a>SSHå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶</h2><p><code>~/.ssh/config</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Read more about SSH config files: https:&#x2F;&#x2F;linux.die.net&#x2F;man&#x2F;5&#x2F;ssh_config</span><br><span class="line">Host ä¸ªäººVM</span><br><span class="line">    HostName 192.168.9.137</span><br><span class="line">    User centos</span><br><span class="line"></span><br><span class="line">Host é˜¿é‡Œäº‘</span><br><span class="line">    HostName 139.224.105.10</span><br><span class="line">    User root</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">Host è…¾è®¯äº‘</span><br><span class="line">    HostName 140.143.6.185</span><br><span class="line">    User root</span><br><span class="line">    Port 22</span><br><span class="line">    IdentityFile ~&#x2F;.ssh&#x2F;id_rsa_tencent</span><br></pre></td></tr></table></figure>
<ul>
<li>Hostï¼šè‡ªå®šä¹‰å‘½å</li>
<li>HostNameï¼šæœºå™¨IPæˆ–è€…åŸŸå</li>
<li>Userï¼šç™»å½•æœºå™¨çš„ç”¨æˆ·å</li>
<li>Portï¼šç™»å½•æœºå™¨çš„ç«¯å£ï¼Œé»˜è®¤ä¸º22ï¼Œå¯çœç•¥</li>
<li>IdentityFileï¼šç™»å½•æœºå™¨æ—¶ä½¿ç”¨çš„ç§é’¥ï¼Œé»˜è®¤ä¸º<code>~/.ssh/id_rsa</code>ï¼Œå¯çœç•¥ï¼›å½“æŸå°æœºå™¨ä½¿ç”¨å•ç‹¬å¯†é’¥æ—¶ï¼Œå¾ˆæœ‰ç”¨</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/05/05/open-source-license/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/05/open-source-license/" class="post-title-link" itemprop="url">å¦‚ä½•é€‰æ‹©å¼€æºåè®®</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-05 14:37:26 / ä¿®æ”¹æ—¶é—´ï¼š14:58:26" itemprop="dateCreated datePublished" datetime="2020-05-05T14:37:26+08:00">2020-05-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å½“åŸºäºå¼€æºé¡¹ç›®å‘å¸ƒæ–°çš„å¼€æºé¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¯´æ˜é¡¹ç›®æ‰€ä½¿ç”¨çš„Licenseï¼ŒåŒæ ·ä¹Ÿéœ€è¦è€ƒè™‘ä½ åŸºäºå¼€æºé¡¹ç›®æ‰€åšçš„äº‹æƒ…ï¼Œæ˜¯å¦æ»¡è¶³è¯¥é¡¹ç›®çš„Licenseã€‚</p>
<p>ä¸‹é¢è¿™2å¹…å›¾æ‘˜è‡ª <a href="https://www.zhihu.com/question/28292322" target="_blank" rel="noopener">å¼€æºè®¸å¯è¯éƒ½æœ‰ä»€ä¹ˆåŒºåˆ«,ä¸€èˆ¬å¼€æºé¡¹ç›®ç”¨ä»€ä¹ˆè®¸å¯è¯? - çŸ¥ä¹</a>ï¼Œè¶³ä»¥å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­ï¼š</p>
<ol>
<li>è¦åšçš„äº‹æƒ…ï¼Œæ˜¯å¦æ»¡è¶³å¼€æºé¡¹ç›®çš„Licenseã€‚</li>
<li>å¼€æºä¸€ä¸ªé¡¹ç›®ï¼Œè¯¥å¦‚ä½•é€‰æ‹©Licenseã€‚</li>
</ol>
<p><img src="http://img.lessisbetter.site/2020-05-license-choose.jpg" alt=""><br>æ¥æºï¼š<a href="https://www.zhihu.com/question/28292322/answer/656121132" target="_blank" rel="noopener">https://www.zhihu.com/question/28292322/answer/656121132</a></p>
<p><img src="http://img.lessisbetter.site/2020-05-license-2.jpg" alt=""><br>æ¥æºï¼š<a href="https://www.zhihu.com/question/28292322/answer/840556759" target="_blank" rel="noopener">https://www.zhihu.com/question/28292322/answer/840556759</a><br>ä»å·¦åˆ°å³ï¼Œæ˜¯ä»å®½æ¾åˆ°ä¸¥æ ¼ã€‚</p>
<p>ä¸¾ä¾‹ï¼š</p>
<ol>
<li>ä»¥å¤ªåŠé‡‡Licenseç”¨çš„æ˜¯LGPLv3ï¼Œä¿®æ”¹æºç åå¦‚æœæä¾›ç»™å¤–éƒ¨ä½¿ç”¨å¿…é¡»å¼€æºï¼Œä¸è¦æ±‚æ–°å¢ä»£ç é‡‡ç”¨ç›¸åŒçš„Licenseï¼Œä¹Ÿä¸è¦æ±‚å¯¹æ–°å¢ä»£ç è¿›è¡Œæ–‡æ¡£è¯´æ˜ï¼Œåæ¥æˆ‘ä»¬é¡¹ç›®åŒæ ·é‡‡ç”¨äº†LGPLv3ã€‚</li>
<li>Fabricé‡‡ç”¨Apache 2.0ï¼ŒåŸºäºFabricé¡¹ç›®åŸæœ‰ä»£ç éƒ½å¿…é¡»æ”¾ç½®FabricåŸæœ‰ç‰ˆæƒå£°æ˜ï¼Œä½†å¯ä»¥é€‰æ‹©ä¸å¼€æºã€‚</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/04/12/fabric-bccsp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/12/fabric-bccsp/" class="post-title-link" itemprop="url">Fabric 1.4æºç è§£è¯» 10ï¼šå¯æ‰©å±•å¯†ç æœåŠ¡æä¾›è€…BCCSPï¼Œä»¥åŠå¯æ‰©å±•å›½å¯†</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-04-12 14:32:33 / ä¿®æ”¹æ—¶é—´ï¼š16:14:56" itemprop="dateCreated datePublished" datetime="2020-04-12T14:32:33+08:00">2020-04-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h2><p>å¯†ç å­¦æ˜¯å½“ä»£æ•°å­—ä¿¡æ¯åŒ–æ—¶ä»£çš„åŸºç¡€æŠ€æœ¯ï¼Œæ²¡æœ‰å¯†ç å­¦ï¼Œç½‘ç»œä¸Šçš„ä¼ è¾“ä¿¡æ¯çš„å¯é æ€§å°±æ— æ³•ä¿è¯ï¼Œæ¯”å¦‚ä½ è¾“å…¥çš„å¯†ç ä¼šè¢«çªƒå–ï¼Œä½ å­˜åœ¨ç½‘ç»œä¸Šçš„ç…§ç‰‡ã€æ–‡æ¡£å¦‚æœæ²¡æœ‰åŠ å¯†ï¼Œå°±æœ‰å¯èƒ½æ³„éœ²ã€‚</p>
<p>å¯†ç å­¦ä¹Ÿæ˜¯åŒºå—é“¾çš„ä¸€é¡¹åŸºç¡€æŠ€æœ¯ï¼Œä½¿ç”¨å¯†ç å­¦å®ç°åŒºå—é“¾ä¸­çš„ï¼šèº«ä»½éªŒè¯ã€æ•°æ®å¯ä¿¡ã€æƒé™ç®¡ç†ã€é›¶çŸ¥è¯†è¯æ˜ã€å¯ä¿¡è®¡ç®—ç­‰ç­‰ã€‚</p>
<p>Fabricæä¾›äº†æ¨¡å—åŒ–çš„ã€å¯æ’æ‹”çš„å¯†ç æœåŠ¡ï¼Œè¯¥æœåŠ¡ç”±<code>bccsp</code>æ¨¡å—æä¾›ï¼Œæœ¬æ–‡å°±è°ˆä¸€ä¸‹BCCSPæ’ä»¶åŒ–è®¾è®¡ï¼Œå¦å¤–Fabricå›½å¯†åŒ–ä¹Ÿæ˜¯æœ€è¿‘2å¹´å¿…åšçš„äº‹æƒ…ï¼Œæ‰€ä»¥åŒæ—¶ä»‹ç»å®ç°å¯æ‰©å±•å›½å¯†çš„æ€è·¯ï¼Œæœ€åä»‹ç»ä¸€ä¸‹Hyperledgerç¤¾åŒºå¯¹Fabricæ”¯æŒå›½å¯†çš„å¼€å‘ã€‚</p>
<h2 id="BCCSPä»‹ç»"><a href="#BCCSPä»‹ç»" class="headerlink" title="BCCSPä»‹ç»"></a>BCCSPä»‹ç»</h2><p>BCCSPæ˜¯Block Chain Crypto Service Providerçš„ç¼©å†™ã€‚</p>
<p><code>bccsp</code>æ¨¡å—å®ƒä¸ºFabricçš„ä¸Šå±‚æ¨¡å—æä¾›å¯†ç å­¦æœåŠ¡ï¼Œå®ƒåŒ…å«çš„å…·ä½“åŠŸèƒ½æœ‰ï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†çš„å¯†é’¥ç”Ÿæˆã€å¯¼å¦‚ã€å¯¼å‡ºï¼Œæ•°å­—ç­¾åå’ŒéªŒè¯ï¼Œå¯¹ç§°åŠ å¯†å’Œè§£å¯†ã€æ‘˜è¦è®¡ç®—ã€‚</p>
<p><code>bccsp</code>æ¨¡å—ä¸ºäº†å¯†ç æœåŠ¡çš„æ‰©å±•æ€§ï¼Œå®šä¹‰äº†<code>BCCSP</code>æ¥å£ï¼Œä¸Šå±‚æ¨¡å—è°ƒç”¨<code>BCCSP</code>æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œè€Œä¸ç›´æ¥è°ƒç”¨å…·ä½“çš„å®ç°å‡½æ•°ï¼Œå®ç°å’Œå…·ä½“å¯†ç å­¦å®ç°çš„è§£è€¦ï¼Œå½“<code>bccsp</code>ä½¿ç”¨ä¸åŒå¯†ç å­¦å®ç°æ—¶ï¼Œä¸Šå±‚æ¨¡å—æ— éœ€ä¿®æ”¹ï¼Œè¿™ç§è§£è€¦æ˜¯é€šè¿‡<strong>ä¾èµ–åè½¬</strong>å®ç°çš„ã€‚</p>
<p>bccspæ¨¡å—ä¸­å½“å‰æœ‰2ç§å¯†ç å®ç°ï¼Œå®ƒä»¬éƒ½æ˜¯bccspä¸­çš„å¯†ç å­¦æ’ä»¶ï¼šSWå’ŒPKCS11ï¼ŒSWä»£è¡¨çš„æ˜¯å›½é™…æ ‡å‡†åŠ å¯†çš„è½¯å®ç°ï¼ŒSWæ˜¯softwareçš„ç¼©å†™ï¼ŒPKCS11ä»£æŒ‡ç¡¬å®ç°ã€‚</p>
<p><img src="http://img.lessisbetter.site/2020-04-fabric-bccsp.png" alt=""></p>
<blockquote>
<p>æ‰©å±•é˜…è¯»ï¼šPKCS11æ˜¯PKCSç³»åˆ—æ ‡å‡†ä¸­çš„ç¬¬11ä¸ªï¼Œå®ƒå®šä¹‰äº†åº”ç”¨å±‚å’Œåº•å±‚åŠ å¯†è®¾å¤‡çš„äº¤äº’æ ‡å‡†ï¼Œæ¯”å¦‚è¿‡å»åœ¨ç”µè„‘ä¸Šï¼Œæ’å…¥USBKeyç”¨ç½‘é“¶è½¬è´¦æ—¶ï¼Œå°±éœ€è¦èµ°USBKeyä¸­çš„ç¡¬ä»¶è¿›è¡Œæ•°å­—ç­¾åï¼Œè¿™ä¸ªè¿‡ç¨‹å°±éœ€è¦ä½¿ç”¨PCKS11ã€‚</p>
</blockquote>
<p>å¯†ç å­¦é€šå¸¸æœ‰è½¯å®ç°å’Œç¡¬å®ç°ï¼Œè½¯å®ç°å°±æ˜¯å¸¸ç”¨çš„å„ç§åŠ å¯†åº“ï¼Œæ¯”å¦‚Goä¸­<code>crypto</code>åŒ…ï¼Œç¡¬å®ç°æ˜¯ä½¿ç”¨åŠ å¯†æœºæä¾›çš„ä¸€å¥—åŠ å¯†æœåŠ¡ã€‚è½¯å®ç°å’Œç¡¬å®ç°çš„é‡è¦åŒºåˆ«æ˜¯ï¼Œå¯†ç ç®—æ³•çš„å®‰å…¨æ€§å¼ºä¾èµ–éšæœºæ•°ï¼Œè½¯å®ç°åˆ©ç”¨çš„æ˜¯OSçš„ä¼ªéšæœºæ•°ï¼Œè€Œç¡¬å®ç°åˆ©ç”¨çš„æ˜¯åŠ å¯†æœºç”Ÿæˆçš„éšæœºæ•°ï¼Œæ‰€ä»¥ç¡¬å®ç°çš„å®‰å…¨å¼ºåº¦è¦é«˜äºè½¯å®ç°ã€‚</p>
<p>è®©Fabricæ”¯æŒå›½å¯†æ—¶ï¼Œå°±éœ€è¦åœ¨bccspä¸­æ–°å¢ä¸€ä¸ªå›½å¯†æ’ä»¶<code>GM</code>ï¼Œåªåœ¨bccspä¸­å¢åŠ GMå¹¶ä¸æ˜¯å®Œæˆçš„Fabricå›½å¯†æ”¹é€ ï¼Œä¸‹æ–‡å†è¯¦ç»†ä»‹ç»ã€‚</p>
<h2 id="SWä»‹ç»"><a href="#SWä»‹ç»" class="headerlink" title="SWä»‹ç»"></a>SWä»‹ç»</h2><p>SWæ˜¯å›½é™…æ ‡å‡†åŠ å¯†çš„è½¯å®ç°æ’ä»¶ï¼Œå®ƒåŒ…å«äº†ECDSAç®—æ³•ã€RSAç®—æ³•ã€AESç®—æ³•ï¼Œä»¥åŠSHAç³»åˆ—çš„æ‘˜è¦ç®—æ³•ã€‚</p>
<p><code>BCCSP</code>æ¥å£å®šä¹‰äº†ä»¥ä¸‹æ–¹æ³•ï¼Œå…¶å®å¯¹å¯†ç å­¦ä¸­çš„å‡½æ•°è¿›è¡Œäº†ä¸€ä¸ªåŠŸèƒ½åˆ†ç±»ï¼š</p>
<ul>
<li><code>KeyGen</code>ï¼šå¯†é’¥ç”Ÿæˆï¼ŒåŒ…å«å¯¹ç§°å’Œéå¯¹ç§°åŠ å¯†</li>
<li><code>KeyDeriv</code>ï¼šå¯†é’¥æ´¾ç”Ÿ</li>
<li><code>KeyImport</code>ï¼šå¯†é’¥å¯¼å…¥ï¼Œä»æ–‡ä»¶ã€å†…å­˜ã€æ•°å­—è¯ä¹¦ä¸­å¯¼å…¥</li>
<li><code>GetKey</code>ï¼šè·å–å¯†é’¥</li>
<li><code>Hash</code>ï¼šè®¡ç®—æ‘˜è¦</li>
<li><code>GetHash</code>ï¼šè·å–æ‘˜è¦è®¡ç®—å®ä¾‹</li>
<li><code>Sign</code>ï¼šæ•°å­—ç­¾å</li>
<li><code>Verify</code>ï¼šç­¾åéªŒè¯</li>
<li><code>Encrypt</code>ï¼šæ•°æ®åŠ å¯†ï¼ŒåŒ…å«å¯¹ç§°å’Œéå¯¹ç§°åŠ å¯†</li>
<li><code>Decrypt</code>ï¼šæ•°æ®è§£å¯†ï¼ŒåŒ…å«å¯¹ç§°å’Œéå¯¹ç§°åŠ å¯†</li>
</ul>
<p>SWè¦åšçš„æ˜¯ï¼ŒæŠŠECDSAã€RSAã€AESã€SHAä¸­çš„å„ç§å‡½æ•°ï¼Œå¯¹åº”åˆ°ä»¥ä¸Šå„ç§åˆ†ç±»ä¸­ï¼Œä¸»è¦çš„åˆ†ç±»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="http://img.lessisbetter.site/2020-04-12-bccsp-sw.png" alt=""></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå¯†é’¥ç”Ÿæˆã€æ´¾ç”Ÿã€å¯¼å…¥éƒ½åŒ…å«äº†ECDSAã€RSAã€AESï¼Œç­¾åå’Œå»¶ç­¾åŒ…å«äº†ECDSAå’ŒRSAï¼Œæ‘˜è¦è®¡ç®—åŒ…å«äº†SHAç³»åˆ—ï¼ŒåŠ å¯†è§£å¯†åŒ…å«äº†AESï¼Œä½†æ²¡æœ‰åŒ…å«RSAï¼Œæ˜¯å› ä¸ºéå¯¹ç§°åŠ å¯†è€—æ—¶ï¼Œå¹¶ä¸å¸¸ç”¨ã€‚</p>
<h2 id="å¯æ’æ‹”å›½å¯†"><a href="#å¯æ’æ‹”å›½å¯†" class="headerlink" title="å¯æ’æ‹”å›½å¯†"></a>å¯æ’æ‹”å›½å¯†</h2><p>Fabricæ”¯æŒå›½å¯†å¹¶éä»…ä»…åœ¨bccspä¸­å¢åŠ 1ä¸ªå›½å¯†å®ç°è¿™ä¹ˆç®€å•ï¼Œè¿˜éœ€è¦è®©æ•°å­—è¯ä¹¦æ”¯æŒå›½å¯†ï¼Œè®©æ•°å­—è¯ä¹¦çš„æ“ä½œç¬¦åˆX.509ã€‚å„è¯­è¨€çš„æ ‡å‡†åº“<code>x509</code>éƒ½æ˜¯é€‚é…æ ‡å‡†åŠ å¯†çš„ï¼Œå¹¶ä¸èƒ½ç›´æ¥ç”¨æ¥æ“ä½œå›½å¯†è¯ä¹¦ã€‚</p>
<p>åœ¨æ•°å­—è¯ä¹¦æ”¯æŒå›½å¯†åï¼Œè¿˜å¯èƒ½éœ€è¦è¿›ä¸€æ­¥è€ƒè™‘ï¼Œæ˜¯å¦éœ€è¦TLSè¯ä¹¦ä½¿ç”¨å›½å¯†æ•°å­—è¯ä¹¦ï¼Œè®©é€šä¿¡è¿‡ç¨‹ä½¿ç”¨å›½å¯†ç®—æ³•ã€‚</p>
<p>å¦å¤–ï¼Œå›½å¯†çš„å®ç°æœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œå¦‚æœéœ€è¦é€‚é…ä¸åŒçš„å›½å¯†å®ç°ï¼Œå°±éœ€è¦ä¿è¯å›½å¯†çš„å¯æ’æ‹”å’Œå¯æ‰©å±•ã€‚</p>
<p>ç»¼ä¸Šæƒ…å†µï¼Œä½ éœ€è¦ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä¸­é—´ä»¶ä¸­åŒ…å«å®šä¹‰å¥½å›½å¯†æ¥å£ã€å›½å¯†æ•°å­—è¯ä¹¦æ¥å£ç­‰ï¼Œç”¨è¿™äº›æ¥å£å»é€‚é…Fabricï¼Œç„¶åå½“é‡‡ç”¨ä¸åŒå›½å¯†å®ç°æ—¶ï¼Œåªéœ€è¦å¯¹å…·ä½“å®ç°è¿›è¡Œå°è£…ï¼Œå»é€‚é…ä¸­é—´ä»¶ä¸­å®šä¹‰å¥½çš„æ¥å£ã€‚</p>
<p><img src="http://img.lessisbetter.site/2020-04-fabric-gm.png" alt=""></p>
<h2 id="ç¤¾åŒºå¯¹Fabricæ”¯æŒå›½å¯†çš„æ€åº¦"><a href="#ç¤¾åŒºå¯¹Fabricæ”¯æŒå›½å¯†çš„æ€åº¦" class="headerlink" title="ç¤¾åŒºå¯¹Fabricæ”¯æŒå›½å¯†çš„æ€åº¦"></a>ç¤¾åŒºå¯¹Fabricæ”¯æŒå›½å¯†çš„æ€åº¦</h2><p>å›½å¯†æœ‰å¾ˆå¤šåŸºäºFabricçš„é¡¹ç›®ï¼Œé‡‘èä¸šæ˜¯åŒºå—é“¾åœºæ™¯æœ€å¤šçš„è¡Œä¸šï¼Œé‡‘èè¡Œä¸šåˆå¿…é¡»ä½¿ç”¨å›½å¯†ï¼Œæ‰€ä»¥å›½å†…å¯¹Fabricå›½å¯†çš„æ”¹é€ æ˜¯å¿…é¡»çš„ï¼Œåœ¨ã€Šé‡‘èåˆ†å¸ƒå¼è´¦æœ¬å®‰å…¨è§„èŒƒã€‹å‘å¸ƒä¹‹åï¼Œç¤¾åŒºä¹Ÿè®¡åˆ’è®©Fabricæ”¯æŒå›½å¯†ï¼Œä½†æ–¹å¼æ˜¯ä¸æä¾›å…·ä½“å›½å¯†å®ç°ï¼Œè€Œæ˜¯å®šä¹‰å¥½æ¥å£ï¼Œé¡¹ç›®æ–¹ä½¿ç”¨å“ªç§å›½å¯†å®ç°ï¼Œå»é€‚é…å®šä¹‰å¥½çš„æ¥å£å³å¯ï¼Œè¿™æ ·ä¿ç•™äº†å¥½çš„æ‰©å±•æ€§ï¼Œä¸<a href="#å¯æ’æ‹”å›½å¯†">å¯æ’æ‹”å›½å¯†</a>çš„ç›®çš„æ˜¯ä¸€è‡´çš„ï¼Œé€‰æ‹©æƒäº¤ç»™ä¼ä¸šã€‚</p>
<p>ç¤¾åŒºæ”¯æŒFabricå›½å¯†çš„ç‰ˆæœ¬ï¼Œé¢„è®¡åœ¨2.xç‰ˆæœ¬å‘å¸ƒã€‚</p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>å¯†ç å­¦åœ¨åŒºå—é“¾ä¸­çš„åœ°ä½æ˜¯ç›¸å½“é«˜çš„ï¼Œä»åŒºå—é“¾ä½¿ç”¨æœ€åŸºç¡€çš„å¯†ç å­¦ï¼Œåˆ°ç°åœ¨è¿˜åœ¨ä¸æ–­èå…¥åŒæ€åŠ å¯†ã€é›¶çŸ¥è¯†è¯æ˜ç­‰å‰è¨€çš„åŠ å¯†æŠ€æœ¯ï¼Œæœªæ¥å¯ä»¥åœ¨åŒºå—é“¾ä¸Šä¿æŠ¤æ•°æ®éšç§çš„æƒ…å†µï¼Œæä¾›æ›´å¥½çš„æœåŠ¡ï¼ŒåŒºå—é“¾ä¹Ÿå¯ä»¥æœ‰æ›´å¤šçš„åº”ç”¨åœºæ™¯ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lessisbetter.site/2020/03/23/markdown-mermaid/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
      <meta itemprop="name" content="å¤§å½¬">
      <meta itemprop="description" content="åŒºå—é“¾ã€Goè¯­è¨€">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Goè¯­è¨€å……ç”µç«™">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/23/markdown-mermaid/" class="post-title-link" itemprop="url">æé«˜ç”»æ—¶åºå›¾çš„æ•ˆç‡</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-03-23 15:28:40 / ä¿®æ”¹æ—¶é—´ï¼š15:30:04" itemprop="dateCreated datePublished" datetime="2020-03-23T15:28:40+08:00">2020-03-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="https://mermaid-js.github.io/mermaid/#/README" target="_blank" rel="noopener">mermaid</a>æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¯ä»¥åœ¨Markdownä¸­ï¼Œä½¿ç”¨ç±»ä¼¼ç¼–å†™ä»£ç çš„æ–¹å¼ï¼Œåˆ¶ä½œæµç¨‹å›¾ã€æ—¶åºå›¾ã€ç”˜ç‰¹å›¾ã€é¥¼å›¾ç­‰ã€‚ä½¿ç”¨ä¸‹æ¥ï¼Œæ„Ÿè§‰å¯ä»¥æ˜æ˜¾æå‡æ—¶åºå›¾çš„æ•ˆç‡ã€‚</p>
<h3 id="æ—¶åºå›¾"><a href="#æ—¶åºå›¾" class="headerlink" title="æ—¶åºå›¾"></a>æ—¶åºå›¾</h3><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    %% æ³¨é‡Š</span><br><span class="line">    Client -&gt;&gt; Gateway: å‘é€JSON RPCè¯·æ±‚</span><br><span class="line">    Gateway -&gt;&gt; Gateway: JSON RPCè¯·æ±‚è½¬æ¢ä¸ºgRPCè¯·æ±‚</span><br><span class="line">    Gateway -&gt;&gt; Server: å‘é€gRPCè¯·æ±‚</span><br><span class="line">    Server -&gt;&gt; Server: å¤„ç†gRPCè¯·æ±‚</span><br><span class="line">    Server -&gt;&gt; Gateway: å‘é€gRPCå“åº”</span><br><span class="line">    Gateway -&gt;&gt; Gateway: gRPCå“åº”è½¬æ¢ä¸ºJSON RPCå“åº”</span><br><span class="line">    Gateway -&gt;&gt; Client: æŠŠJSON RPCå“åº”å‘é€ç»™å®¢æˆ·ç«¯</span><br></pre></td></tr></table></figure>
<pre class="mermaid">sequenceDiagram
    %% æ³¨é‡Š
    Client ->> Gateway: å‘é€JSON RPCè¯·æ±‚
    Gateway ->> Gateway: JSON RPCè¯·æ±‚è½¬æ¢ä¸ºgRPCè¯·æ±‚
    Gateway ->> Server: å‘é€gRPCè¯·æ±‚
    Server ->> Server: å¤„ç†gRPCè¯·æ±‚
    Server ->> Gateway: å‘é€gRPCå“åº”
    Gateway ->> Gateway: gRPCå“åº”è½¬æ¢ä¸ºJSON RPCå“åº”
    Gateway ->> Client: æŠŠJSON RPCå“åº”å‘é€ç»™å®¢æˆ·ç«¯</pre>

<h4 id="æ˜µç§°"><a href="#æ˜µç§°" class="headerlink" title="æ˜µç§°"></a>æ˜µç§°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant C as Client</span><br><span class="line">    participant G as Gateway</span><br><span class="line">    participant S as Server</span><br><span class="line"></span><br><span class="line">    C -&gt;&gt; G: å‘é€JSON RPCè¯·æ±‚</span><br><span class="line">    G -&gt;&gt; G: JSON RPCè¯·æ±‚è½¬æ¢ä¸ºgRPCè¯·æ±‚</span><br><span class="line">    G -&gt;&gt; S: å‘é€gRPCè¯·æ±‚</span><br><span class="line">    S -&gt;&gt; S: å¤„ç†gRPCè¯·æ±‚</span><br><span class="line">    S -&gt;&gt; G: å‘é€gRPCå“åº”</span><br><span class="line">    G -&gt;&gt; G: gRPCå“åº”è½¬æ¢ä¸ºJSON RPCå“åº”</span><br><span class="line">    G -&gt;&gt; C: æŠŠJSON RPCå“åº”å‘é€ç»™å®¢æˆ·ç«¯</span><br></pre></td></tr></table></figure>
<pre class="mermaid">sequenceDiagram
    participant C as Client
    participant G as Gateway
    participant S as Server

    C ->> G: å‘é€JSON RPCè¯·æ±‚
    G ->> G: JSON RPCè¯·æ±‚è½¬æ¢ä¸ºgRPCè¯·æ±‚
    G ->> S: å‘é€gRPCè¯·æ±‚
    S ->> S: å¤„ç†gRPCè¯·æ±‚
    S ->> G: å‘é€gRPCå“åº”
    G ->> G: gRPCå“åº”è½¬æ¢ä¸ºJSON RPCå“åº”
    G ->> C: æŠŠJSON RPCå“åº”å‘é€ç»™å®¢æˆ·ç«¯</pre>

<h4 id="çº¿æ¡å’Œç®­å¤´"><a href="#çº¿æ¡å’Œç®­å¤´" class="headerlink" title="çº¿æ¡å’Œç®­å¤´"></a>çº¿æ¡å’Œç®­å¤´</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    Client -&gt; Gateway: å®çº¿</span><br><span class="line">    Client --&gt; Gateway: è™šçº¿ --</span><br><span class="line">    Client -&gt;&gt; Gateway: å¸¦ç®­å¤´ &gt;&gt;</span><br><span class="line">    Client -x Gateway: å¸¦å‰ï¼Œä¸ä½¿ç”¨&gt;</span><br></pre></td></tr></table></figure>
<pre class="mermaid">sequenceDiagram
    Client -> Gateway: å®çº¿
    Client --> Gateway: è™šçº¿ --
    Client ->> Gateway: å¸¦ç®­å¤´ >>
    Client -x Gateway: å¸¦å‰ï¼Œä¸ä½¿ç”¨></pre>

<h4 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    Note left of Client: åˆ›å»ºè¯·æ±‚</span><br><span class="line">    Note right of Gateway: æ¥æ”¶è¯·æ±‚</span><br></pre></td></tr></table></figure>
<pre class="mermaid">sequenceDiagram
    Note left of Client: åˆ›å»ºè¯·æ±‚
    Note right of Gateway: æ¥æ”¶è¯·æ±‚</pre>

<h4 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    loop Every Second</span><br><span class="line">        Client -&gt;&gt; Server: å‘é€è¯·æ±‚</span><br><span class="line">        Server -&gt;&gt; Server: å¤„ç†è¯·æ±‚</span><br><span class="line">        Server -&gt;&gt; Client: å‘é€å“åº”</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>
<pre class="mermaid">sequenceDiagram
    loop Every Second
        Client ->> Server: å‘é€è¯·æ±‚
        Server ->> Server: å¤„ç†è¯·æ±‚
        Server ->> Client: å‘é€å“åº”
    end</pre>

<h4 id="Ifè¯­å¥"><a href="#Ifè¯­å¥" class="headerlink" title="Ifè¯­å¥"></a>Ifè¯­å¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    Client -&gt;&gt; Server: æŸ¥è¯¢ç”¨æˆ·</span><br><span class="line">    alt User not found</span><br><span class="line">        Server -&gt;&gt; Server: åˆ›å»ºé”™è¯¯å“åº”ï¼šç”¨æˆ·ä¸å­˜åœ¨</span><br><span class="line">    else </span><br><span class="line">        Server -&gt;&gt; Server: ä½¿ç”¨ç”¨æˆ·ä¿¡æ¯åˆ›å»ºå“åº”</span><br><span class="line">    end</span><br><span class="line">    Server -&gt;&gt; Client: å‘é€å“åº”</span><br></pre></td></tr></table></figure>
<pre class="mermaid">sequenceDiagram
    Client ->> Server: æŸ¥è¯¢ç”¨æˆ·
    alt User not found
        Server ->> Server: åˆ›å»ºé”™è¯¯å“åº”ï¼šç”¨æˆ·ä¸å­˜åœ¨
    else 
        Server ->> Server: ä½¿ç”¨ç”¨æˆ·ä¿¡æ¯åˆ›å»ºå“åº”
    end
    Server ->> Client: å‘é€å“åº”</pre>

<h4 id="èƒŒæ™¯é¢œè‰²"><a href="#èƒŒæ™¯é¢œè‰²" class="headerlink" title="èƒŒæ™¯é¢œè‰²"></a>èƒŒæ™¯é¢œè‰²</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    Client -&gt;&gt; Server: å‘é€è¯·æ±‚</span><br><span class="line">    rect rgb(191,223,255)</span><br><span class="line">    Server -&gt;&gt; Server: å¤„ç†è¯·æ±‚</span><br><span class="line">    Server -&gt;&gt; Client: å‘é€å“åº”</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>
<pre class="mermaid">sequenceDiagram
    Client ->> Server: å‘é€è¯·æ±‚
    rect rgb(191,223,255)
    Server ->> Server: å¤„ç†è¯·æ±‚
    Server ->> Client: å‘é€å“åº”
    end</pre>

<h4 id="æ¿€æ´»"><a href="#æ¿€æ´»" class="headerlink" title="æ¿€æ´»"></a>æ¿€æ´»</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    Client -&gt;&gt; Server: å‘é€è¯·æ±‚</span><br><span class="line">    activate Server</span><br><span class="line">    Server -&gt;&gt; Server: å¤„ç†è¯·æ±‚</span><br><span class="line">    Server -&gt;&gt; Client: å‘é€å“åº”</span><br><span class="line">    deactivate Server</span><br></pre></td></tr></table></figure>
<pre class="mermaid">sequenceDiagram
    Client ->> Server: å‘é€è¯·æ±‚
    activate Server
    Server ->> Server: å¤„ç†è¯·æ±‚
    Server ->> Client: å‘é€å“åº”
    deactivate Server</pre>

<h3 id="é¥¼å›¾"><a href="#é¥¼å›¾" class="headerlink" title="é¥¼å›¾"></a>é¥¼å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pie</span><br><span class="line">    title ç¡¬å¸æ­£åé¢çš„æ¦‚ç‡</span><br><span class="line">    &quot;æ­£é¢&quot;: 0.5</span><br><span class="line">    &quot;åé¢&quot;: 0.5</span><br></pre></td></tr></table></figure>
<pre class="mermaid">pie
    title ç¡¬å¸æ­£åé¢çš„æ¦‚ç‡
    "æ­£é¢": 0.5
    "åé¢": 0.5</pre>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="å¤§å½¬"
      src="http://img.lessisbetter.site/gzh-qrcode-logo-small.png">
  <p class="site-author-name" itemprop="name">å¤§å½¬</p>
  <div class="site-description" itemprop="description">åŒºå—é“¾ã€Goè¯­è¨€</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">131</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">75</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="http://img.lessisbetter.site/gzh-qrcode-logo-small.png" title="å…¬ä¼—å· â†’ http://img.lessisbetter.site/gzh-qrcode-logo-small.png" rel="noopener" target="_blank"><i class="fa fa-fw fa-wechat"></i>å…¬ä¼—å·</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/shitaibin" title="GitHub â†’ https://github.com/shitaibin" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://segmentfault.com/u/lessisbetter" title="SegmentFault â†’ https://segmentfault.com/u/lessisbetter" rel="noopener" target="_blank"><i class="fa fa-fw fa-crosshairs"></i>SegmentFault</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianshu.com/u/947f3ccdd481" title="ç®€ä¹¦ â†’ https://www.jianshu.com/u/947f3ccdd481" rel="noopener" target="_blank"><i class="fa fa-fw fa-heartbeat"></i>ç®€ä¹¦</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/4296218/james-shi" title="StackOverflow â†’ https://stackoverflow.com/users/4296218/james-shi" rel="noopener" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hz_stb@163.com" title="E-Mail â†’ mailto:hz_stb@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      å‹é“¾
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://xargin.com" title="https://xargin.com" rel="noopener" target="_blank">Xarginæ›¹å¤§åšå®¢</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://pingcap.com/blog-cn/" title="https://pingcap.com/blog-cn/" rel="noopener" target="_blank">PingCapæŠ€æœ¯åšå®¢</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://qcrao.github.io/" title="https://qcrao.github.io/" rel="noopener" target="_blank">ç å†œæ¡ƒèŠ±æºåšå®¢</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://book.eddycjy.com/golang/" title="https://book.eddycjy.com/golang/" rel="noopener" target="_blank">ç…é±¼çš„è¿·ä¹‹åšå®¢</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://dave.cheney.net" title="https://dave.cheney.net" rel="noopener" target="_blank">Dave Cheneyçš„åšå®¢</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://theme-next.iissnan.com/getting-started.html" title="http://theme-next.iissnan.com/getting-started.html" rel="noopener" target="_blank">Hexo Nextä¸»é¢˜é…ç½®</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="http://www.beian.miit.gov.cn" rel="noopener" target="_blank">æµ™ICP </a><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=18051706" rel="noopener" target="_blank">å¤‡18051706 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å¤§å½¬</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://pisces.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.2
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>


  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1275814754&web_id=1275814754"></script>
  </div>






      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>












<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'default',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  


</body>
</html>
