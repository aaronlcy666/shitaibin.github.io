---
title: 以太坊是如何防止篡改数据的？
date: 2018-06-02 12:05:41
tags: ['以太坊', '安全']
---


安全永远是区块链的核心，区块链需要确保链上的数据不被篡改，保证数据永远的真实性，否则，将会带来重大的利益损失。

# 哪些数据被篡改

能让篡改人获取利益的，都是需要保护的数据。有2种获取利益最直接的方式：
1. 修改交易信息
2. 修改奖励地址，盗取挖矿人的奖励

我们看看以太坊是如何保护交易和挖矿人的。

<!--more-->

## 修改交易信息

> TODO

## 盗取胜利的果实

小明挖的块，应当获得奖励，小刚收到小明的区块后，修改了区块里获得奖励的地址，然后再广播给其他人，小刚能获得奖励吗？必须只能让小明获得奖励，否则这就是不公。

以太坊使用PoW的共识机试来保证奖励只能发放到挖矿人的账户，并且不能被篡改。以太坊的PoW共识算法是`Ethash`，它本质是寻找一个符合条件的随机数`Nonce`，需要满足的条件是：`Rand(hash, nonce) <= Target`，其中，
- hash，是**区块头的哈希值`hash`**。
- nonce，是要寻找的随机数`Nonce`。
- Target，是根据区块难度计算出的一个值。

当`Nonce`符合条件的时候，会把这个公式的结果`摘要(Digest)`和`Nonce`存到区块中去，然后广播给其他区块。其他节点验证的时候，会把hash和nonce带到公式中去验证，只有当结果满足公式，并且区块头中的摘要和计算出的摘要相同，才能证明区块是正确的，加入到自己的区块链。

修改奖励地址得到的区块，无法通过其他节点验证。`hash`是区块头的哈希值，而区块头中包含了获取奖励的地址（`Coinbase`），当修改获取奖励的地址，`hash`也必然发生改变。**用修改后的`hash`带入公式去计算，不可能结果即满足公式，区块头中的摘要和计算出的摘要又相同，其他节点也就不承认这个修改过的区块。**`hashimoto`函数实现了`Rand(hash, nonce)`的功能。

--------------

如果你从这篇文章有所收获，不妨赞赏一下。

以太坊：0x5D0929Af9Fc75104e2218cC40dd3d5a45f2A8FCB


